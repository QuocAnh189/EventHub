import{j as e,S as p,y as j,q as C,g as y,b$ as R,r as o,c0 as A,c1 as P,ao as w,w as N,b as S,c2 as M}from"./index-C6gZgSuN.js";import{P as k}from"./protected-DMc74W99.js";import{P as I}from"./PageHeader-DqEYKDpW.js";import{C as g}from"./CustomersInfobox-xC6q6Fkw.js";import{P as $}from"./ProgressBar-D6zF3erm.js";import{a as E}from"./helpers-DvHh5QHq.js";import{u as Y,P as T}from"./Pagination-BX4SOnra.js";import{S as D}from"./SubmenuTrigger-BRzR5-By.js";import{R as v}from"./RatingStars-B74bKMQU.js";import{C as B}from"./Counter-CWGHksP9.js";import"./wrapNativeSuper-CiTMlVth.js";import"./index-DzvSQQH7.js";const L=t=>{const{rate:a=0,value:s=0}=t;return e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs("span",{className:"flex items-center gap-1 label-text leading-none w-[30px]",children:[a," ",e.jsx("i",{className:"icon-star-solid text-yellow"})]}),e.jsx("div",{className:"flex-1",children:e.jsx($,{value:s||0,color:"yellow"})}),e.jsxs("span",{className:"!text-header label-text w-[42px] text-right",children:[s||0,"%"]})]})},U=t=>{const{data:a}=t;return e.jsx(p,{className:"card min-h-[182px] !py-5 flex flex-col justify-between col-span-2",children:a==null?void 0:a.map((s,c)=>e.jsx(L,{rate:s.rate,value:E(a,s.value)},c))})},q=t=>{const{date:a,wrapperClass:s}=t;return e.jsxs("div",{className:`flex gap-2 ${s||""}`,children:[e.jsx("i",{className:"icon icon-clock-solid text-sm -mt-[1px]"}),e.jsxs("div",{className:"flex flex-col gap-[3px]",children:[e.jsx("span",{className:"h6 !text-sm !font-semibold",children:j(a).format("DD/MM/YYYY")}),e.jsxs("span",{className:"font-medium text-sm",children:["at ",j(a).format("hh:mm A")]})]})]})},O=t=>{const{userName:a,userAvatar:s,email:c,wrapperClass:n}=t;return e.jsxs("div",{className:`flex items-center ${n}`,children:[e.jsx("img",{className:"bg-input-border shrink-0 w-10 h-10 rounded-md md:w-[63px] md:h-[63px]",src:s||w,alt:a,width:63,height:63}),e.jsxs("div",{className:"flex flex-col gap-1.5 md:gap-2.5",children:[e.jsx("h6",{className:"truncate max-w-[120px] xs:max-w-[180px]",children:a}),e.jsx("a",{className:"text-btn",href:`mailto:${c}`,children:e.jsx("span",{className:"truncate max-w-[120px] xs:max-w-[180px]",children:c})})]})]})},Q=t=>{const{coverImage:a,name:s,wrapperClass:c}=t;return e.jsxs("div",{className:`flex items-center ${c}`,children:[e.jsx("img",{className:"bg-input-border shrink-0 w-10 h-10 rounded-md md:w-[63px] md:h-[63px]",src:a||w,alt:"",width:63,height:63}),e.jsx("div",{className:"flex flex-col gap-1.5 md:gap-2.5",children:e.jsx("h6",{className:"max-w-[120px] xs:max-w-[180px]",children:s})})]})},W=t=>{const{index:a,review:s}=t,{theme:c}=C(),{width:n}=y(),[l,{width:x}]=R(),u=c==="light"?"var(--body)":"rgba(39,50,65,.2)",[h,r]=o.useState(!1);return o.useEffect(()=>{r(!1)},[n]),e.jsxs(p,{index:a,children:[e.jsx("div",{className:"p-5",style:{backgroundColor:a%2===0?u:"var(--widget)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{userName:s.fullName,userAvatar:s.userAvatar,email:s.email,wrapperClass:"gap-5 md:gap-[30px] md:w-[300px]"}),n>=768&&e.jsxs("div",{className:"flex items-center gap-[18px] xl:ml-[30px] xl:mr-10 xl:w-[200px]",children:[e.jsx(v,{rating:s.rate}),e.jsx("span",{className:"label-text",children:s.rate})]}),n>=1280&&e.jsxs("div",{className:`flex flex-1 gap-5 bg-input-bg border border-input-border h-20 rounded-md
                             max-w-[588px] p-4 overflow-hidden`,children:[e.jsx("div",{className:"flex-1 max-w-[513px]",ref:l,children:e.jsx(A,{className:"flex-1",text:s.content,width:x})}),e.jsx("button",{className:"self-start icon text-[18px] mt-1",onClick:()=>r(!0),"aria-label":"See details",children:e.jsx("i",{className:"icon-message-arrow-up-right-regular"})})]}),n>=1024&&e.jsx(q,{date:s.createdAt,wrapperClass:"xl:ml-[30px] xl:mr-[75px]"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("button",{className:"icon text-[18px] mt-0.5 xl:hidden",onClick:()=>r(!0),"aria-label":"See details",children:e.jsx("i",{className:"icon-message-arrow-up-right-regular"})}),e.jsx(D,{})]})]})}),e.jsx(P,{open:h,onClose:()=>r(!1),children:e.jsxs("div",{className:"card relative no-hover flex flex-col w-full max-w-[400px] will-change-transform",children:[e.jsx("button",{className:"absolute top-5 right-5 icon text-[18px] transition hover:text-red",onClick:()=>r(!1),"aria-label":"Close",children:e.jsx("i",{className:"icon-circle-xmark-regular"})}),e.jsx(Q,{coverImage:s.eventCoverImage,name:s.eventName,wrapperClass:"gap-4 mb-5"}),e.jsxs("p",{className:"flex gap-4 mb-2",children:[e.jsx("span",{className:"label-text",children:"Date: "}),e.jsx("span",{className:"text-sm font-medium",children:j(s.createdAt).format("DD/MM/YYYY, hh:mm A")})]}),e.jsxs("p",{className:"flex gap-4 mb-2",children:[e.jsx("span",{className:"label-text",children:"UserName: "}),e.jsx("span",{className:"text-sm font-medium",children:s.fullName})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("span",{className:"label-text",children:"Rate:"}),e.jsx(v,{rating:s.rate})]}),e.jsx("div",{className:"bg-input-bg rounded-md border border-input-border h-[240px] p-4 overflow-y-auto",children:s.content})]})})]})},_={id:1,userId:"123",fullName:"Tran Phuoc Anh Quoc",userAvatar:"",email:"anhquoc18092003@gail.com",eventId:"321",eventName:"My Event",eventCoverImage:"",content:"I don not like it",rate:4,createdAt:new Date,updatedAt:new Date},z=t=>{const{t:a,reviews:s,total:c}=t;console.log(s);const n=Y(c,4);return e.jsxs(p,{className:"flex flex-1 flex-col gap-[26px]",children:[e.jsxs("div",{className:"card !p-0 flex-1",children:[e.jsx("div",{className:"flex flex-col p-5 gap-2.5 md:flex-row md:justify-between md:items-center md:px-[26px]",children:e.jsx("h5",{children:a("main.title")})}),e.jsx("span",{className:"block h-[1px] bg-input-border opacity-60"}),e.jsx("div",{children:Array(10).fill(1).map((l,x)=>e.jsx(W,{review:_,index:x},`review-${x}`))})]}),n.maxPage>1&&e.jsx(T,{pagination:n})]})},G=N("review")(z),H=t=>{const{t:a,score:s}=t;return e.jsxs(p,{className:"card flex flex-col items-start md:items-center md:!pt-11",children:[e.jsx(v,{value:s}),e.jsx(B,{className:"h2 md:!text-[32px] my-[17px]",num:s,decimals:1}),e.jsx("span",{className:"h6",children:a("middle.review_score")})]})},F=N("review")(H),J=({t})=>{const a=S(i=>i.persistedReducer.user.user),{data:s}=M(a==null?void 0:a.id),[c,n]=o.useState(0),[l,x]=o.useState(),[u,h]=o.useState([]),[r,b]=o.useState();o.useEffect(()=>{s&&(x(s.items),b(s.metadata))},[s]);const m=i=>{const d={};return l==null||l.forEach(f=>{d[i]=f.rate===i?d[i]+1||1:d[i]}),d[i]||0};return o.useEffect(()=>{const i=[{rate:1,value:m(1)},{rate:2,value:m(2)},{rate:3,value:m(3)},{rate:4,value:m(4)},{rate:5,value:m(5)}];h(i)},[l==null?void 0:l.length]),o.useEffect(()=>{const i=l==null?void 0:l.reduce((d,f)=>d+f.rate,0);n(Math.floor(i/(r==null?void 0:r.totalCount)))},[l==null?void 0:l.length]),e.jsxs(k,{children:[e.jsx(I,{title:t("header.title")}),e.jsxs("div",{className:"flex flex-col flex-1 gap-5 md:gap-[26px]",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-y-5 md:gap-y-[26px] xl:grid-cols-6 xl:gap-x-[26px]",children:[e.jsxs("div",{className:"widgets-grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:col-span-4",children:[e.jsx(F,{score:c}),e.jsx(g,{label:t("middle.total"),count:r==null?void 0:r.totalCount,color:"green",suffix:""}),e.jsx(g,{label:t("middle.new"),count:25,suffix:"%",iconClass:"user-plus-solid"}),e.jsx(g,{label:t("middle.regular"),count:75,suffix:"%",color:"red",iconClass:"user-group-crown-solid"})]}),e.jsx(U,{data:u})]}),e.jsx(G,{reviews:l,total:r==null?void 0:r.totalCount})]})]})},ie=N("review")(J);export{ie as default};
