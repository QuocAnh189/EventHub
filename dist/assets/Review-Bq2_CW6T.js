import{j as e,aQ as p,bc as w,E as g,aS as b,z as C,d2 as y,r as o,d3 as P,d4 as R,bB as N,w as v}from"./index-DJCO8Dfg.js";import{P as A}from"./protected-CfuprWCo.js";import{P as S}from"./PageHeader-Dvd09tMC.js";import{C as f}from"./CustomersInfobox-CIGjs8CT.js";import{P as M}from"./ProgressBar-DL90lBoU.js";import{u as k,P as E}from"./Pagination-Bq7Xuqug.js";import{S as I}from"./SubmenuTrigger-BwprHNW4.js";import{R as j}from"./RatingStars-ZRBHSmrL.js";import{C as $}from"./Counter-QyeV_hXI.js";import"./wrapNativeSuper-D_2Cus0j.js";import"./index-T3bh9t9-.js";const Y=l=>{const{rate:a=0,value:s=0}=l;return e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs("span",{className:"flex items-center gap-1 label-text leading-none w-[30px]",children:[a," ",e.jsx("i",{className:"icon-star-solid text-yellow"})]}),e.jsx("div",{className:"flex-1",children:e.jsx(M,{value:s||0,color:"yellow"})}),e.jsxs("span",{className:"!text-header label-text w-[42px] text-right",children:[s||0,"%"]})]})},T=l=>{const{data:a}=l;return e.jsx(p,{className:"card min-h-[182px] !py-5 flex flex-col justify-between col-span-2",children:a==null?void 0:a.map((s,t)=>e.jsx(Y,{rate:s.rate,value:w(a,s.value)},t))})},D=l=>{const{date:a,wrapperClass:s}=l;return e.jsxs("div",{className:`flex gap-2 ${s||""}`,children:[e.jsx("i",{className:"icon icon-clock-solid text-sm -mt-[1px]"}),e.jsxs("div",{className:"flex flex-col gap-[3px]",children:[e.jsx("span",{className:"h6 !text-sm !font-semibold",children:g(a).format("DD/MM/YYYY")}),e.jsxs("span",{className:"font-medium text-sm",children:["at ",g(a).format("hh:mm A")]})]})]})},B=l=>{const{userName:a,userAvatar:s,email:t,wrapperClass:r}=l;return e.jsxs("div",{className:`flex items-center ${r}`,children:[e.jsx("img",{className:"bg-input-border shrink-0 w-10 h-10 rounded-md md:w-[63px] md:h-[63px]",src:s||N,alt:a,width:63,height:63}),e.jsxs("div",{className:"flex flex-col gap-1.5 md:gap-2.5",children:[e.jsx("h6",{className:"truncate max-w-[120px] xs:max-w-[180px]",children:a}),e.jsx("a",{className:"text-btn",href:`mailto:${t}`,children:e.jsx("span",{className:"truncate max-w-[120px] xs:max-w-[180px]",children:t})})]})]})},L=l=>{const{coverImage:a,name:s,wrapperClass:t}=l;return e.jsxs("div",{className:`flex items-center ${t}`,children:[e.jsx("img",{className:"bg-input-border shrink-0 w-10 h-10 rounded-md md:w-[63px] md:h-[63px]",src:a||N,alt:"",width:63,height:63}),e.jsx("div",{className:"flex flex-col gap-1.5 md:gap-2.5",children:e.jsx("h6",{className:"max-w-[120px] xs:max-w-[180px]",children:s})})]})},z=l=>{const{index:a,review:s}=l,{theme:t}=b(),{width:r}=C(),[m,{width:x}]=y(),c=t==="light"?"var(--body)":"rgba(39,50,65,.2)",[u,n]=o.useState(!1);return o.useEffect(()=>{n(!1)},[r]),e.jsxs(p,{index:a,children:[e.jsx("div",{className:"p-5",style:{backgroundColor:a%2===0?c:"var(--widget)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{userName:s.fullName,userAvatar:s.userAvatar,email:s.email,wrapperClass:"gap-5 md:gap-[30px] md:w-[300px]"}),r>=768&&e.jsxs("div",{className:"flex items-center gap-[18px] xl:ml-[30px] xl:mr-10 xl:w-[200px]",children:[e.jsx(j,{rating:s.rate}),e.jsx("span",{className:"label-text",children:s.rate})]}),r>=1280&&e.jsxs("div",{className:`flex flex-1 gap-5 bg-input-bg border border-input-border h-20 rounded-md\r
                             max-w-[588px] p-4 overflow-hidden`,children:[e.jsx("div",{className:"flex-1 max-w-[513px]",ref:m,children:e.jsx(P,{className:"flex-1",text:s.content,width:x})}),e.jsx("button",{className:"self-start icon text-[18px] mt-1",onClick:()=>n(!0),"aria-label":"See details",children:e.jsx("i",{className:"icon-message-arrow-up-right-regular"})})]}),r>=1024&&e.jsx(D,{date:s.createdAt,wrapperClass:"xl:ml-[30px] xl:mr-[75px]"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("button",{className:"icon text-[18px] mt-0.5 xl:hidden",onClick:()=>n(!0),"aria-label":"See details",children:e.jsx("i",{className:"icon-message-arrow-up-right-regular"})}),e.jsx(I,{})]})]})}),e.jsx(R,{open:u,onClose:()=>n(!1),children:e.jsxs("div",{className:"card relative no-hover flex flex-col w-full max-w-[400px] will-change-transform",children:[e.jsx("button",{className:"absolute top-5 right-5 icon text-[18px] transition hover:text-red",onClick:()=>n(!1),"aria-label":"Close",children:e.jsx("i",{className:"icon-circle-xmark-regular"})}),e.jsx(L,{coverImage:s.eventCoverImage,name:s.eventName,wrapperClass:"gap-4 mb-5"}),e.jsxs("p",{className:"flex gap-4 mb-2",children:[e.jsx("span",{className:"label-text",children:"Date: "}),e.jsx("span",{className:"text-sm font-medium",children:g(s.createdAt).format("DD/MM/YYYY, hh:mm A")})]}),e.jsxs("p",{className:"flex gap-4 mb-2",children:[e.jsx("span",{className:"label-text",children:"UserName: "}),e.jsx("span",{className:"text-sm font-medium",children:s.fullName})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("span",{className:"label-text",children:"Rate:"}),e.jsx(j,{rating:s.rate})]}),e.jsx("div",{className:"bg-input-bg rounded-md border border-input-border h-[240px] p-4 overflow-y-auto",children:s.content})]})})]})},O={id:1,userId:"123",fullName:"Tran Phuoc Anh Quoc",userAvatar:"",email:"anhquoc18092003@gail.com",eventId:"321",eventName:"My Event",eventCoverImage:"",content:"I don not like it",rate:4,createdAt:new Date,updatedAt:new Date},Q=l=>{const{t:a,reviews:s,total:t}=l;console.log(s);const r=k(t,4);return e.jsxs(p,{className:"flex flex-1 flex-col gap-[26px]",children:[e.jsxs("div",{className:"card !p-0 flex-1",children:[e.jsx("div",{className:"flex flex-col p-5 gap-2.5 md:flex-row md:justify-between md:items-center md:px-[26px]",children:e.jsx("h5",{children:a("main.title")})}),e.jsx("span",{className:"block h-[1px] bg-input-border opacity-60"}),e.jsx("div",{children:Array(10).fill(1).map((m,x)=>e.jsx(z,{review:O,index:x},`review-${x}`))})]}),r.maxPage>1&&e.jsx(E,{pagination:r})]})},U=v("review")(Q),W=l=>{const{t:a,score:s}=l;return e.jsxs(p,{className:"card flex flex-col items-start md:items-center md:!pt-11",children:[e.jsx(j,{value:s}),e.jsx($,{className:"h2 md:!text-[32px] my-[17px]",num:s,decimals:1}),e.jsx("span",{className:"h6",children:a("middle.review_score")})]})},_=v("review")(W),q=({t:l})=>{const[a,s]=o.useState(0),[t,r]=o.useState(),[m,x]=o.useState([]),[c,u]=o.useState();o.useEffect(()=>{r([]),u(void 0)},[]);const n=i=>{const d={};return t==null||t.forEach(h=>{d[i]=h.rate===i?d[i]+1||1:d[i]}),d[i]||0};return o.useEffect(()=>{const i=[{rate:1,value:n(1)},{rate:2,value:n(2)},{rate:3,value:n(3)},{rate:4,value:n(4)},{rate:5,value:n(5)}];x(i)},[t==null?void 0:t.length]),o.useEffect(()=>{const i=t==null?void 0:t.reduce((d,h)=>d+h.rate,0);s(Math.floor(i/(c==null?void 0:c.totalCount)))},[t==null?void 0:t.length]),e.jsxs(A,{children:[e.jsx(S,{title:l("header.title")}),e.jsxs("div",{className:"flex flex-col flex-1 gap-5 md:gap-[26px]",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-y-5 md:gap-y-[26px] xl:grid-cols-6 xl:gap-x-[26px]",children:[e.jsxs("div",{className:"widgets-grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:col-span-4",children:[e.jsx(_,{score:a}),e.jsx(f,{label:l("middle.total"),count:c==null?void 0:c.totalCount,color:"green",suffix:""}),e.jsx(f,{label:l("middle.new"),count:25,suffix:"%",iconClass:"user-plus-solid"}),e.jsx(f,{label:l("middle.regular"),count:75,suffix:"%",color:"red",iconClass:"user-group-crown-solid"})]}),e.jsx(T,{data:m})]}),e.jsx(U,{reviews:t,total:c==null?void 0:c.totalCount})]})]})},te=v("review")(q);export{te as default};
