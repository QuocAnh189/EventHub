import{w as P,b as S,r as t,bg as H,bh as V,j as s,L as B,m as G,bd as U,V as Q,aH as q,aI as z,B as J}from"./index-BrZH0d3x.js";import{P as K}from"./PageHeader-CDe-_0Tr.js";import{P as W}from"./protected-CXzhvSTF.js";import{u as X,P as N}from"./Pagination-B3qqXmWs.js";import{C as w,N as Y}from"./CardMyEvent-Bb5biKka.js";import{C as Z}from"./Dialog-BYEb2l1K.js";import{S as v}from"./index-k6O9rKcn.js";import{c as ee,d as T}from"./event.type-CzgUQE7A.js";import{F as se}from"./FormGroup-CK3EjtU2.js";import"./index-BwXeDKHI.js";import"./CircularProgress-DWGzp6J_.js";const te=({t:n})=>{const k=S(e=>e.persistedReducer.category.categories),p=S(e=>e.persistedReducer.user.user),[d,h]=t.useState(ee),[u,F]=t.useState(),[r,I]=t.useState([]),[c,R]=t.useState(!1),[j,_]=t.useState(!1),[a,E]=t.useState(T),[l,x]=t.useState([]),[A]=H(),{data:m,isSuccess:L,isFetching:M,refetch:y}=V({userId:p==null?void 0:p.id,params:{...d}});t.useEffect(()=>{m&&(I(m.items),F(m.metadata))},[m]);const i=X(u==null?void 0:u.totalCount,4);t.useEffect(()=>{x(c?r.map(e=>e.id):[])},[c]),t.useEffect(()=>{h({...d,page:i.currentPage})},[i.currentPage]);const g=({value:e,label:o},f)=>{E($=>({...$,[f]:{value:e,label:o}}))},O=()=>{var e;h({...d,type:(e=a.status)==null?void 0:e.value,categoryIds:a.category.value})},b=e=>{if(l.includes(e)){const o=l.filter(f=>f!==e);x(o)}else x([...l,e])},D=async()=>{try{l.length&&await A(l).unwrap()&&(J.success("Restore Event successfully"),y())}catch(e){console.log(e)}},C=()=>{y()};return M?s.jsx(B,{}):s.jsxs("div",{className:"flex flex-col flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3 md:gap-x-6 xl:grid-cols-6",children:[s.jsx(v,{options:G,value:a==null?void 0:a.status,placeholder:n("management.label_status"),onChange:e=>g(e,"status")}),s.jsx(v,{options:k.map(e=>({value:e.id,label:e.name})),value:a==null?void 0:a.category,placeholder:n("management.label_category"),onChange:e=>g(e,"category")}),s.jsx(v,{options:U,value:a.eventTicketType,placeholder:n("management.label_price"),onChange:e=>g(e,"eventTicketType")}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("button",{className:"btn bg-primary flex text-white !gap-[5px]",onClick:O,children:n("management.filter")}),s.jsx("button",{className:"btn btn--outline blue !h-[44px]",onClick:()=>{E(T)},children:n("management.clear")})]})]}),s.jsx(Q,{wrapperClass:"lg:w-[326px]",placeholder:"Search Event",onChange:e=>{h({...d,search:e})}})]}),s.jsxs("div",{className:"w-full flex items-center justify-between py-4",children:[r.length!==0&&s.jsx(se,{sx:{display:"flex",flexDirection:"row"},children:s.jsx(q,{sx:{"& .MuiFormControlLabel-label":{color:"var(--header)"}},control:s.jsx(z,{sx:{color:"var(--header)"},checked:c,onChange:()=>{R(!c)}}),label:"Select all"})}),s.jsx("button",{onClick:D,className:"btn bg-primary flex text-white !gap-[5px]",children:"Restore"})]}),r.length!==0&&s.jsxs("div",{className:"flex flex-col gap-[22px]",children:[s.jsx("div",{className:"w-full grid grid-cols-2 gap-10",children:r==null?void 0:r.map((e,o)=>s.jsx(w,{event:e,checkedAll:c,eventIds:l,onChecked:b,refect:C},`event-${o}`))}),i.maxPage>1&&s.jsx(N,{pagination:i})]}),s.jsxs("div",{className:"flex flex-col gap-[22px]",children:[s.jsx("div",{className:"w-full grid grid-cols-2 gap-10",children:Array(4).fill(1).map((e,o)=>s.jsx(w,{event:e,checkedAll:c,eventIds:l,onChecked:b,refect:C},`event-${o}`))}),i.maxPage>1&&s.jsx(N,{pagination:i})]}),L&&r.length===0&&s.jsx(Y,{}),j&&s.jsx(Z,{title:"Action Event",description:"Are you sure want to delete this events",open:j,setOpen:e=>{_(e)},action:"Ok",onHandle:()=>{},disabled:!1})]})},ae=P("my_event")(te),ne=({t:n})=>s.jsx(W,{children:s.jsxs("div",{className:"min-h-screen",children:[s.jsx(K,{title:n("header.trash")}),s.jsx(ae,{})]})}),ge=P("my_event")(ne);export{ge as default};
